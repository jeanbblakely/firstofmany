<h2 mat-dialog-title class="mat-display-1">{{ category.name }}</h2>
<div *ngIf="category.experiences.length == 0" class="no-experiences mat-h2">
  You haven't added any {{ category.name | lowercase }} yet. <br> Add your first now!
</div>
<div [ngClass]='category.experiences.length > 0 ? "visible" : "hidden"'>
  <mat-form-field>
    <mat-icon matPrefix>search</mat-icon>
    <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Search">

  </mat-form-field>

  <table mat-table [dataSource]="dataSource" matSort matSortActive="datestamp" matSortDisableClear matSortDirection="asc">

    <ng-container matColumnDef="favorite">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>
        <mat-icon>favorite_border</mat-icon>
      </th>
      <td mat-cell *matCellDef="let experience" (click)="favoriteThis(experience)" class="favorite-cell">
        <mat-icon color="primary" aria-label="favorite icon">
          {{getFavoriteIcon(experience['favorite'])}}
        </mat-icon>
      </td>
    </ng-container>

    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Name </th>
      <td mat-cell *matCellDef="let experience" (click)="openExperienceDialog(experience)"> {{ experience.name }}</td>
    </ng-container>

    <ng-container matColumnDef="datestamp">
      <th mat-header-cell *matHeaderCellDef fxHide.lt-sm mat-sort-header> Date </th>
      <td mat-cell *matCellDef="let experience" fxHide.lt-sm (click)="openExperienceDialog(experience)"> {{ experience.datestamp | date:'mediumDate' }}
      </td>
    </ng-container>

    <ng-container matColumnDef="note">
      <th mat-header-cell *matHeaderCellDef fxHide.lt-sm> Note </th>
      <td mat-cell *matCellDef="let experience" fxHide.lt-sm (click)="openExperienceDialog(experience)"> {{ experience.note }}
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="columnsToDisplay; sticky: true"></tr>
    <tr mat-row *matRowDef="let experience; columns: columnsToDisplay;" class="experience-row"></tr>
  </table>
  <mat-paginator [pageSizeOptions]="[5, 10, 25]" [length]="category.experiences.length"
    [ngClass]='category.experiences.length > 5 ? "visible" : "hidden"'></mat-paginator>
</div>

<button mat-fab class="floating-action-button fab-left" (click)="backClicked.emit()">
  <mat-icon>arrow_back</mat-icon>
  <span class="floating-action-button-text">Back to categories</span>
</button>

<a mat-fab color="primary" class="floating-action-button fab-right" (click)="openExperienceDialog()">
  <mat-icon>add</mat-icon>
  <span class="floating-action-button-text">Add a new experience</span>
</a>